---
model:
  project:
    title: Creative ways to cook your objects
    description:
      The main motivation is to boost the writing of unit tests by simplifying the process of creating new data content.
      This is achieved by mutating programmatically existing data
    media: logo.png
  readme:
    highlights:
      - Written in `Typescript`.
      - Uses JSON-like object as an input.
      - Can be used with any testing framework (Jest, Ava, baldrick-zest, etc...)
      - A simpler and experimental alternative to property testing. **No need
        for a schema**. You should still consider, property based testing framework
        like[fast-check](https://dubzzz.github.io/fast-check.github.com/) that
        can help find bugs in unexplored code paths.
    usage:
      media: usage.png
      link: USAGE.md
    links:
      - '[Usage](USAGE.md)'
    related:
      - '[baldrick-zest-engine](https://github.com/flarebyte/baldrick-zest-engine) Run tests declaratively with a few cunning plans'
  github:
    account: flarebyte
    name: object-crumble
  copyright:
    holder: Flarebyte.com
    startYear: 2021
  license: MIT
  codacy:
    projectId: 60b7f9751c214b0fa16ef3a6acf6c2c8 
workflows:
  test:
    title: Test the library
    description: Test the library for defects
    tasks:
      jest:
        title: Run the unit tests with Jest
        description: Use the Jest framework to run unit test (deprecated)
        motivation: Check that the units of code behave as intended
        steps:
          - a: batch
            name: main
            title: Run Jest unit tests
            links:
              - title: Jest homepage
                url: https://jestjs.io/
            commands:
              - name: test
                title: Test all test files in test folder
                run: npx baldrick-dev-ts test check
      spec:
        title: Run unit tests declaratively
        description: Run unit tests for pure functions declaratively using YAML files
        motivation: Provide test coverage in a concise manner
        steps:
          - a: batch
            name: main
            title: Run the baldrick-zest unit tests
            commands:
              - name: spec
                run: node --loader ts-node/esm .baldrick-zest.ts
      cli:
        title: Run client directly
        description: Run the client with ts-node during development
        motivation: Simulate a CLI app in development without the need to install it globally
        steps:
          - a: batch
            name: main
            title: Run the CLI using ts-node
            commands:
              - name: cli
                run: node --loader ts-node/esm src/cli.mts
  transpile:
    title: Transpile the source code
    description: Transpile source code
    tasks:
      ts:
        title: Transpile typescript
        description: Generate javascript from the typescript source code
        motivation: Javascript code is more portable and can be consumed by other projects
        parameters:
          - description: The output directory
            flags: '--outDir'
        steps:
          - a: batch
            name: main
            title: Compile the typescript code
            commands:
              - name: clean
                title: Delete dist folder
                run: rm -rf dist
              - name: transpile
                title: Compile with typescript
                run: tsc --outDir dist
  doc:
    title: Generate the documentation
    description: Generate the documentation automatically
    tasks:
      ts:
        title: Generate documentation
        description: Generate the markdown documentation for the typescript project
        motivation: Good documentation is essential for developer experience
        parameters:
          - description: The output directory
            flags: '--outDir'
        steps:
          - a: batch
            name: main
            title: Generate the documentation
            commands:
              - name: report-folder
                title: Ensure that we have a report folder
                run: mdir -p report
              - name: typedoc
                title: Generate typedoc doc.json
                run: npx typedoc --json report/doc.json --pretty src/index.ts
              - name: api
                title: Generate markdown files for the Api
                run: npx baldrick-doc-ts typedoc --json-source report/doc.json
              - name: ngram
                title: Generate some markdown files with ngram
                run: baldrick-doc-ts parse -f internal ngram
              - name: fix
                title: Fix all the markdown files
                run: baldrick markdown fix
              - name: github
                run: baldrick markdown fix -s .github/
  github:
    title: Management of the github project
    description: Generate the documentation based on the source code
    tasks:
      standard:
        title: Standardize the github  repository
        description: Enable useful features for the github project repository
        motivation: Create consistent settings
        steps:
          - a: batch
            name: main
            commands:
              - name: edit
                run: gh repo edit --delete-branch-on-merge --enable-squash-merge
  lint:
    title: Static code analysis
    description: Find problems in the code base
    tasks:
      check:
        title: Static code analysis of Typescript code
        description: Find problems in Typescript code
        motivation: Make the code more consistent and avoid bugs
        steps:
          - a: batch
            name: main
            title: lint check
            commands:
              - name: check
                title: Lint check sources
                run: baldrick lint check -s src test
      fix:
        title: Fix static code analysis
        description: Fix problems in Typescript code
        motivation: Facilitate routine maintenance of code
        steps:
          - a: batch
            name: main
            commands:
              - name: fix
                run: baldrick lint fix -s src test
  md:
    title: Markdown documentation
    description: Manage markdown documentation
    tasks:
      check:
        title: Check Markdown files
        description: Checks that the markdown documents follows some consistent guidelines
        motivation: Make the markdown documents consistent in style
        steps:
          - a: batch
            name: main
            commands:
              - name: check
                title: Check markdown files
                run: baldrick markdown check
              - name: github
                title: Check markdown files in github
                run: baldrick markdown check -s .github/
      fix:
        title: Fix Markdown files
        description: Modify the markdown documents to ensure they follow some consistent guidelines
        motivation: Make the markdown documents consistent in style
        steps:
          - a: batch
            name: main
            commands:
              - name: fix
                title: Fix markdown files
                run: baldrick markdown fix
              - name: github
                title: Fix markdown files in github
                run: baldrick markdown fix -s .github/
  release:
    title: Release of the library
    tasks:
      ready:
        title: Ready for publishing
        description: Run a sequence of commands to check that the library is ready to be published
        motivation: Detect quality flaws before pushing the code
        steps:
          - a: batch
            name: main
            commands:
              - name: lint
                run: baldrick lint check -s src test
              - name: markdown
                title: Check markdown files
                run: baldrick markdown check
              - name: markdown-github
                title: Check markdown files in github
                run: baldrick markdown check -s .github/
              - name: outdated
                title: Check whether some libraries are outdated
                run: yarn outdated
              - name: outdated
                title: Audit some libraries
                run: yarn audit
              - name: release-check
                title: Checks that the version has been incremented
                run: baldrick release check
  scaffold:
    title: Scaffolding for the project
    tasks:
      upgrade:
        title: Upgrade baldrick-broth configuration to latest version
        description: Gets the latest version of this configuration file
        motivation: Always apply the latest project conventions
        steps:
          - a: batch
            name: main
            commands:
              - name: model
                run: dasel select -f baldrick-broth.yaml "model"
                onSuccess:
                  - silent
                  - save
                links:
                  - title: Dasel homepage
                    url: https://daseldocs.tomwright.me/
              - name: save-model
                stdin: build.model.project.title2
                run: cat
                links:
                  - title: sponge from moreutils homepage 
                    url: https://formulae.brew.sh/formula/moreutils
              # - name: merge
              #   run: npx baldrick-whisker@latest object baldrick-broth.yaml temp/baldrick-broth.yaml github:flarebyte:baldrick-reserve:data/ts/baldrick-broth.yaml
      norm:
        title: Normalize the project
        description: Normalize the project in a similar fashion that the other typescript projects
        motivation: Make the project structure consistent and easier to navigate
        steps:
          - a: batch
            name: main
            commands:
              - name: mkdir
                run: mkdir -p .vscode .github/workflows .github/ISSUE_TEMPLATE src test spec script script/data script/schema
              - name: snippet
                run: npx baldrick-whisker@latest object --no-ext .vscode/baldrick.code-snippets.json github:flarebyte:baldrick-reserve:data/ts/snippet.yaml
              - name: bug-report
                run: npx baldrick-whisker@latest object .github/ISSUE_TEMPLATE/bug_report.yaml github:flarebyte:baldrick-reserve:data/ts/bug-report.yaml
              - name: feature-request
                run: npx baldrick-whisker@latest object .github/ISSUE_TEMPLATE/feature_request.yaml github:flarebyte:baldrick-reserve:data/ts/feature-request.yaml
              - name: workflow-main
                run: npx baldrick-whisker@latest object .github/workflows/main.yml github:flarebyte:baldrick-reserve:data/ts/workflow-main.yml
              - name: gitignore
                run: npx baldrick-whisker@latest render --no-ext baldrick-broth.yaml github:flarebyte:baldrick-reserve:template/ts/gitignore.hbs .gitignore.sh
              - name: editorconfig
                run: npx baldrick-whisker@latest render --no-ext baldrick-broth.yaml github:flarebyte:baldrick-reserve:template/editorconfig.hbs .editorconfig.sh
              - name: contributing
                run: npx baldrick-whisker@latest render baldrick-broth.yaml github:flarebyte:baldrick-reserve:template/ts/contributing.hbs CONTRIBUTING.md
              - name: pull-request-template
                run: npx baldrick-whisker@latest render baldrick-broth.yaml github:flarebyte:baldrick-reserve:template/ts/pull-request-template.hbs .github/pull_request_template.md
              - name: glossary
                run: npx baldrick-whisker@latest render github:flarebyte:baldrick-reserve:data/glossary.yaml github:flarebyte:baldrick-reserve:template/glossary.hbs GLOSSARY.md
              - name: vscode-settings
                run: npx baldrick-whisker@latest object .vscode/settings.json github:flarebyte:baldrick-reserve:data/ts/vscode-settings.json --no-overwrite
              - name: decisions
                run: npx baldrick-whisker@latest render baldrick-broth.yaml github:flarebyte:baldrick-reserve:template/decisions.hbs DECISIONS.md --no-overwrite
